<!DOCTYPE html>
<html lang="ko">
<head>
    <!-- ê¸°ë³¸ ë©”íƒ€ íƒœê·¸ ì„¤ì • -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê¸°ì–µë ¥ ì±Œë¦°ì§€! 4ìë¦¬ ê¸°ì–µí•˜ê¸°</title>
    
    <!-- Google Fonts - ë„¥ìŠ¨ì²´ ëŒ€ì‹  ê¹”ë”í•œ í•œê¸€ í°íŠ¸ ì‚¬ìš© -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        /* ì „ì²´ í˜ì´ì§€ ì´ˆê¸°í™” ë° ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* ì „ì²´ ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼ - ëª¨ë°”ì¼ 9:16 ë¹„ìœ¨ ê³ ì • */
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        /* ê²Œì„ í™”ë©´ ì»¨í…Œì´ë„ˆ */
        .game-container {
            width: 360px;
            height: 640px; /* 9:16 ë¹„ìœ¨ */
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            position: relative;
            overflow: hidden;
        }

        /* ê° ì¥ë©´ì„ ìœ„í•œ ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
        .scene {
            width: 100%;
            height: 100%;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 40px 20px;
            text-align: center;
        }

        /* í™œì„±í™”ëœ ì¥ë©´ë§Œ í‘œì‹œ */
        .scene.active {
            display: flex;
        }

        /* ê²Œì„ ì œëª© ìŠ¤íƒ€ì¼ */
        .title {
            font-size: 28px;
            font-weight: 700;
            color: #333;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        /* ì„¤ëª… í…ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ */
        .description {
            font-size: 16px;
            color: #666;
            margin-bottom: 40px;
            line-height: 1.5;
        }

        /* í° ë²„íŠ¼ ê³µí†µ ìŠ¤íƒ€ì¼ */
        .big-button {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            border: none;
            padding: 20px 40px;
            font-size: 18px;
            font-weight: 700;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 20px rgba(255, 107, 107, 0.3);
        }

        /* ë²„íŠ¼ í˜¸ë²„ íš¨ê³¼ */
        .big-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 25px rgba(255, 107, 107, 0.4);
        }

        /* 2ìë¦¬ ìˆ«ì 4ì„¸íŠ¸ ì»¨í…Œì´ë„ˆ */
        .number-sets-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 40px 0;
            flex-wrap: wrap;
        }

        /* ê° 2ìë¦¬ ìˆ«ì ì„¸íŠ¸ ìŠ¤íƒ€ì¼ */
        .number-set {
            font-size: 48px;
            font-weight: 700;
            color: #333;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 15px 20px;
            border-radius: 15px;
            letter-spacing: 5px;
            text-shadow: 2px 2px 8px rgba(0,0,0,0.3);
            animation: numberPulse 0.5s ease-in-out;
            box-shadow: 0 8px 20px rgba(240, 147, 251, 0.3);
            min-width: 80px;
            text-align: center;
        }

        /* ìˆ«ì ë‚˜íƒ€ë‚˜ê¸° ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes numberPulse {
            0% { transform: scale(0.5); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        /* ì›í˜• í”„ë¡œê·¸ë ˆìŠ¤ ë°” ì»¨í…Œì´ë„ˆ */
        .progress-container {
            position: relative;
            width: 120px;
            height: 120px;
            margin-bottom: 40px;
        }

        /* ì›í˜• í”„ë¡œê·¸ë ˆìŠ¤ ë°” ë°°ê²½ */
        .progress-ring {
            transform: rotate(-90deg);
        }

        /* í”„ë¡œê·¸ë ˆìŠ¤ ë°” ì› */
        .progress-ring-circle {
            fill: none;
            stroke: #e0e0e0;
            stroke-width: 8;
        }

        /* í”„ë¡œê·¸ë ˆìŠ¤ ë°” í™œì„± ë¶€ë¶„ */
        .progress-ring-progress {
            fill: none;
            stroke: #ff6b6b;
            stroke-width: 8;
            stroke-linecap: round;
            transition: stroke-dashoffset 0.1s ease;
        }

        /* ì¹´ìš´íŠ¸ë‹¤ìš´ ìˆ«ì */
        .countdown-number {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 36px;
            font-weight: 700;
            color: #333;
        }

        /* ì…ë ¥ ì„¸íŠ¸ ì»¨í…Œì´ë„ˆ */
        .input-sets-container {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        /* ê° 2ìë¦¬ ì…ë ¥ì°½ ìŠ¤íƒ€ì¼ */
        .number-input-set {
            width: 70px;
            height: 60px;
            font-size: 24px;
            text-align: center;
            border: 3px solid #ddd;
            border-radius: 12px;
            letter-spacing: 2px;
            transition: border-color 0.3s ease;
            background: #f8f9fa;
        }

        /* í™œì„± ì…ë ¥ì°½ ìŠ¤íƒ€ì¼ */
        .number-input-set.active {
            border-color: #ff6b6b;
            box-shadow: 0 0 15px rgba(255, 107, 107, 0.3);
            background: white;
        }

        /* í‚¤íŒ¨ë“œ ì»¨í…Œì´ë„ˆ */
        .keypad-container {
            margin-bottom: 30px;
        }

        /* í‚¤íŒ¨ë“œ í–‰ */
        .keypad-row {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        /* í‚¤íŒ¨ë“œ ë²„íŠ¼ */
        .keypad-btn {
            width: 60px;
            height: 60px;
            font-size: 24px;
            font-weight: 700;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.2s ease;
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            color: white;
            box-shadow: 0 4px 10px rgba(116, 185, 255, 0.3);
        }

        /* í‚¤íŒ¨ë“œ ë²„íŠ¼ í˜¸ë²„ íš¨ê³¼ */
        .keypad-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(116, 185, 255, 0.4);
        }

        /* í‚¤íŒ¨ë“œ ë²„íŠ¼ í´ë¦­ íš¨ê³¼ */
        .keypad-btn:active {
            transform: translateY(0);
            box-shadow: 0 2px 5px rgba(116, 185, 255, 0.3);
        }

        /* ì‚­ì œ ë²„íŠ¼ */
        .delete-btn {
            background: linear-gradient(135deg, #ff7675 0%, #e17055 100%) !important;
            box-shadow: 0 4px 10px rgba(255, 118, 117, 0.3) !important;
        }

        .delete-btn:hover {
            box-shadow: 0 6px 15px rgba(255, 118, 117, 0.4) !important;
        }

        /* ì „ì²´ ì‚­ì œ ë²„íŠ¼ */
        .clear-btn {
            background: linear-gradient(135deg, #fd79a8 0%, #e84393 100%) !important;
            box-shadow: 0 4px 10px rgba(253, 121, 168, 0.3) !important;
        }

        .clear-btn:hover {
            box-shadow: 0 6px 15px rgba(253, 121, 168, 0.4) !important;
        }

        /* ì„±ê³µ ë©”ì‹œì§€ ìŠ¤íƒ€ì¼ */
        .success-message {
            font-size: 24px;
            font-weight: 700;
            color: #27ae60;
            margin-bottom: 30px;
        }

        /* ì‹¤íŒ¨ ë©”ì‹œì§€ ìŠ¤íƒ€ì¼ */
        .fail-message {
            font-size: 24px;
            font-weight: 700;
            color: #e74c3c;
            margin-bottom: 30px;
        }

        /* ë‚ ì•„ê°€ëŠ” ì´ë¯¸ì§€ ì• ë‹ˆë©”ì´ì…˜ */
        .flying-image {
            position: absolute;
            top: 50%;
            left: -100px;
            width: 80px;
            height: 80px;
            z-index: 1000;
            animation: flyAcross 4s ease-in-out forwards;
        }

        /* ì¢Œì—ì„œ ìš°ë¡œ ë‚ ì•„ê°€ëŠ” ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes flyAcross {
            0% {
                left: -100px;
                transform: translateY(-50%) rotate(0deg);
                opacity: 1;
            }
            50% {
                transform: translateY(-50%) rotate(180deg);
                opacity: 1;
            }
            100% {
                left: calc(100% + 100px);
                transform: translateY(-50%) rotate(360deg);
                opacity: 0;
            }
        }

        /* ì¶•í¬ íš¨ê³¼ ì• ë‹ˆë©”ì´ì…˜ */
        .confetti-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            animation: confettiFall 3s ease-out forwards;
        }

        @keyframes confettiFall {
            0% {
                transform: translateY(-100px) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(700px) rotate(720deg);
                opacity: 0;
            }
        }

        /* ì¿ í° ì´ë¯¸ì§€ ìŠ¤íƒ€ì¼ */
        .coupon-image {
            width: 250px;
            height: 150px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            margin-bottom: 30px;
            box-shadow: 0 8px 20px rgba(240, 147, 251, 0.3);
        }

        /* ì¿ í° í…ìŠ¤íŠ¸ */
        .coupon-text {
            color: white;
            font-size: 20px;
            font-weight: 700;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        /* ì¿ í° ê¸ˆì•¡ */
        .coupon-amount {
            color: white;
            font-size: 32px;
            font-weight: 700;
            margin-top: 10px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        /* ë²„íŠ¼ ê·¸ë£¹ */
        .button-group {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* ì‘ì€ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .small-button {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            border: none;
            padding: 15px 25px;
            font-size: 16px;
            font-weight: 700;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 6px 15px rgba(116, 185, 255, 0.3);
        }

        /* ì‘ì€ ë²„íŠ¼ í˜¸ë²„ íš¨ê³¼ */
        .small-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(116, 185, 255, 0.4);
        }

        /* ë°˜ì‘í˜• ë””ìì¸ - ì‘ì€ í™”ë©´ ëŒ€ì‘ */
        @media (max-width: 380px) {
            .game-container {
                width: 95vw;
                height: calc(95vw * 16/9);
            }
            
            .number-display {
                                 font-size: 36px;
             }
             
             .number-input-set {
                 width: 60px;
                 height: 50px;
                 font-size: 20px;
             }
             
             .keypad-btn {
                 width: 50px;
                 height: 50px;
                 font-size: 20px;
             }
             
             .keypad-row {
                 gap: 10px;
             }
        }
    </style>
</head>
<body>
    <!-- ì „ì²´ ê²Œì„ ì»¨í…Œì´ë„ˆ -->
    <div class="game-container">
        
        <!-- ì¥ë©´ 1: ì‹œì‘ í™”ë©´ -->
        <div class="scene active" id="scene1">
            <h1 class="title">ğŸ® ê¸°ì–µë ¥ ì±Œë¦°ì§€!</h1>
            <p class="description">5ì´ˆ ë™ì•ˆ 2ìë¦¬ ìˆ«ì 4ì„¸íŠ¸ë¥¼<br>ê¸°ì–µí•˜ê³  ì •í™•íˆ ì…ë ¥í•´ë³´ì„¸ìš”!</p>
            <button class="big-button" onclick="startGameWithSound()">ğŸš€ ì‹œì‘í•˜ê¸°</button>
        </div>

        <!-- ì¥ë©´ 2: ìˆ«ì ë³´ì—¬ì£¼ê¸° í™”ë©´ -->
        <div class="scene" id="scene2">
            <!-- ì›í˜• í”„ë¡œê·¸ë ˆìŠ¤ ë°”ì™€ ì¹´ìš´íŠ¸ë‹¤ìš´ -->
            <div class="progress-container">
                <svg class="progress-ring" width="120" height="120">
                    <circle class="progress-ring-circle" cx="60" cy="60" r="52"></circle>
                    <circle class="progress-ring-progress" cx="60" cy="60" r="52" 
                            stroke-dasharray="326.726" stroke-dashoffset="326.726" id="progressCircle"></circle>
                </svg>
                <div class="countdown-number" id="countdownNumber">5</div>
            </div>
            
            <!-- 2ìë¦¬ ìˆ«ì 4ì„¸íŠ¸ í‘œì‹œ -->
            <div class="number-sets-container" id="numberSetsContainer">
                <div class="number-set" id="numberSet1">00</div>
                <div class="number-set" id="numberSet2">00</div>
                <div class="number-set" id="numberSet3">00</div>
                <div class="number-set" id="numberSet4">00</div>
            </div>
        </div>

        <!-- ì¥ë©´ 3: ì…ë ¥ í™”ë©´ -->
        <div class="scene" id="scene3">
            <h2 class="title">ğŸ”¢ ìˆ«ìë¥¼ ì…ë ¥í•˜ì„¸ìš”</h2>
            
            <!-- 2ìë¦¬ ìˆ«ì 4ì„¸íŠ¸ ì…ë ¥ì°½ -->
            <div class="input-sets-container">
                <input type="text" class="number-input-set" id="userInput1" placeholder="00" maxlength="2" readonly>
                <input type="text" class="number-input-set" id="userInput2" placeholder="00" maxlength="2" readonly>
                <input type="text" class="number-input-set" id="userInput3" placeholder="00" maxlength="2" readonly>
                <input type="text" class="number-input-set" id="userInput4" placeholder="00" maxlength="2" readonly>
            </div>
            
            <!-- ìˆ«ì í‚¤íŒ¨ë“œ -->
            <div class="keypad-container">
                <div class="keypad-row">
                    <button class="keypad-btn" onclick="inputNumber('1')">1</button>
                    <button class="keypad-btn" onclick="inputNumber('2')">2</button>
                    <button class="keypad-btn" onclick="inputNumber('3')">3</button>
                </div>
                <div class="keypad-row">
                    <button class="keypad-btn" onclick="inputNumber('4')">4</button>
                    <button class="keypad-btn" onclick="inputNumber('5')">5</button>
                    <button class="keypad-btn" onclick="inputNumber('6')">6</button>
                </div>
                <div class="keypad-row">
                    <button class="keypad-btn" onclick="inputNumber('7')">7</button>
                    <button class="keypad-btn" onclick="inputNumber('8')">8</button>
                    <button class="keypad-btn" onclick="inputNumber('9')">9</button>
                </div>
                <div class="keypad-row">
                    <button class="keypad-btn delete-btn" onclick="deleteNumber()">âŒ«</button>
                    <button class="keypad-btn" onclick="inputNumber('0')">0</button>
                    <button class="keypad-btn clear-btn" onclick="clearAll()">C</button>
                </div>
            </div>
            
            <button class="big-button" onclick="checkAnswer()">âœ… ì œì¶œí•˜ê¸°</button>
        </div>

        <!-- ì¥ë©´ 4-1: ì„±ê³µ ê²°ê³¼ í™”ë©´ -->
        <div class="scene" id="scene4-success">
            <!-- ì¶•í¬ ì»¨í…Œì´ë„ˆ -->
            <div class="confetti-container" id="confettiContainer"></div>
            
            <div class="success-message">ğŸ‰ ì •ë‹µì…ë‹ˆë‹¤! ì¶•í•˜í•©ë‹ˆë‹¤!</div>
            
            <!-- ì¿ í° ì´ë¯¸ì§€ -->
            <div class="coupon-image" id="couponImage">
                <div class="coupon-text">ğŸ ì¶•í•˜ ì¿ í°</div>
                <div class="coupon-amount">1000ì› í• ì¸</div>
            </div>
            
            <!-- ë²„íŠ¼ ê·¸ë£¹ -->
            <div class="button-group">
                <button class="small-button" onclick="saveCoupon()">ğŸ’¾ ì¿ í° ì €ì¥</button>
                <button class="small-button" onclick="goHome()">ğŸ  í™ˆìœ¼ë¡œ</button>
            </div>
            
            <!-- ì„±ê³µ ì¶•í¬ ì‚¬ìš´ë“œ -->
            <audio id="successSound" preload="auto">
                <source src="congraturation01.mp3" type="audio/mpeg">
                <!-- ëŒ€ì²´ ì‚¬ìš´ë“œ (mp3ê°€ ì—†ëŠ” ê²½ìš°) -->
                <source src="https://www.soundjay.com/misc/sounds/ding-idea-40142.mp3" type="audio/mpeg">
            </audio>
        </div>

        <!-- ì¥ë©´ 4-2: ì‹¤íŒ¨ ê²°ê³¼ í™”ë©´ -->
        <div class="scene" id="scene4-fail">
            <div class="fail-message">ğŸ˜… ì•„ì‰½ë„¤ìš”! ë‹¤ì‹œ ë„ì „í•´ë³´ì„¸ìš”.</div>
            <p class="description">ì •ë‹µì€ <span id="correctAnswer">0000</span>ì´ì—ˆìŠµë‹ˆë‹¤.</p>
            
            <!-- ë²„íŠ¼ ê·¸ë£¹ -->
            <div class="button-group">
                <button class="small-button" onclick="startGame()">ğŸ”„ ë‹¤ì‹œ ë„ì „</button>
                <button class="small-button" onclick="goHome()">ğŸ  í™ˆìœ¼ë¡œ</button>
            </div>
            
            <!-- ì‹¤íŒ¨ ì›ƒìŒ ì‚¬ìš´ë“œ -->
            <audio id="failSound" preload="auto">
                <source src="Kid Laugh Sound.mp3" type="audio/mpeg">
                <!-- ëŒ€ì²´ ì‚¬ìš´ë“œ (mp3ê°€ ì—†ëŠ” ê²½ìš°) -->
                <source src="https://www.soundjay.com/misc/sounds/beep-07a.mp3" type="audio/mpeg">
            </audio>
        </div>

    </div>

    <script>
        // ì „ì—­ ë³€ìˆ˜ ì„ ì–¸
        let currentNumbers = []; // í˜„ì¬ ê²Œì„ì˜ ì •ë‹µ ìˆ«ì ë°°ì—´ (2ìë¦¬ì”© 4ê°œ)
        let countdownTimer; // ì¹´ìš´íŠ¸ë‹¤ìš´ íƒ€ì´ë¨¸
        let countdownSeconds = 5; // ì¹´ìš´íŠ¸ë‹¤ìš´ ì´ˆ (5ì´ˆë¡œ ë³€ê²½)
        let currentInputIndex = 0; // í˜„ì¬ ì…ë ¥ì¤‘ì¸ ì¸ë±ìŠ¤ (0~3)

        // ê²Œì„ ì‹œì‘ í•¨ìˆ˜ (ì‚¬ìš´ë“œ í™œì„±í™” í¬í•¨)
        function startGameWithSound() {
            // ì˜¤ë””ì˜¤ ì»¨í…ìŠ¤íŠ¸ í™œì„±í™” (ì‚¬ìš©ì ìƒí˜¸ì‘ìš© í›„)
            enableAudio();
            // ì‹¤ì œ ê²Œì„ ì‹œì‘
            startGame();
        }

        // ê²Œì„ ì‹œì‘ í•¨ìˆ˜
        function startGame() {
            // 2ìë¦¬ ìˆ«ì 4ê°œ ìƒì„± (10~99)
            currentNumbers = [];
            for (let i = 0; i < 4; i++) {
                currentNumbers.push(Math.floor(Math.random() * 90 + 10).toString());
            }
            
            // ì¥ë©´ 2ë¡œ ì „í™˜ (ìˆ«ì ë³´ì—¬ì£¼ê¸°)
            showScene('scene2');
            
            // ìƒì„±ëœ ìˆ«ìë“¤ì„ í™”ë©´ì— í‘œì‹œ
            document.getElementById('numberSet1').textContent = currentNumbers[0];
            document.getElementById('numberSet2').textContent = currentNumbers[1];
            document.getElementById('numberSet3').textContent = currentNumbers[2];
            document.getElementById('numberSet4').textContent = currentNumbers[3];
            
            // ì¹´ìš´íŠ¸ë‹¤ìš´ ì‹œì‘
            startCountdown();
        }

        // ì˜¤ë””ì˜¤ í™œì„±í™” í•¨ìˆ˜
        function enableAudio() {
            // ì‚¬ìš©ì í´ë¦­ìœ¼ë¡œ ì˜¤ë””ì˜¤ ì»¨í…ìŠ¤íŠ¸ í™œì„±í™”
            const successSound = document.getElementById('successSound');
            const failSound = document.getElementById('failSound');
            
            // ì‘ì€ ì†Œë¦¬ë¡œ í•œ ë²ˆ ì¬ìƒí•˜ì—¬ ì˜¤ë””ì˜¤ í™œì„±í™”
            successSound.volume = 0.01;
            successSound.play().then(() => {
                successSound.pause();
                successSound.currentTime = 0;
                successSound.volume = 1.0; // ë³¼ë¥¨ ë³µêµ¬
                console.log('ì˜¤ë””ì˜¤ í™œì„±í™” ì„±ê³µ');
            }).catch(e => {
                console.log('ì˜¤ë””ì˜¤ í™œì„±í™” ì‹¤íŒ¨:', e);
            });
        }

        // ì¹´ìš´íŠ¸ë‹¤ìš´ ì‹œì‘ í•¨ìˆ˜
        function startCountdown() {
            countdownSeconds = 5; // ì´ˆê¸°í™” (5ì´ˆë¡œ ë³€ê²½)
            const countdownElement = document.getElementById('countdownNumber');
            const progressCircle = document.getElementById('progressCircle');
            const circumference = 2 * Math.PI * 52; // ì›ì˜ ë‘˜ë ˆ ê³„ì‚°
            
            // í”„ë¡œê·¸ë ˆìŠ¤ ë°” ì´ˆê¸° ì„¤ì •
            progressCircle.style.strokeDasharray = circumference;
            progressCircle.style.strokeDashoffset = circumference;
            
            // 1ì´ˆë§ˆë‹¤ ì‹¤í–‰ë˜ëŠ” íƒ€ì´ë¨¸
            countdownTimer = setInterval(() => {
                countdownSeconds--;
                countdownElement.textContent = countdownSeconds;
                
                // í”„ë¡œê·¸ë ˆìŠ¤ ë°” ì—…ë°ì´íŠ¸ (5ì´ˆì—ì„œ 0ì´ˆë¡œ ì§„í–‰)
                const progress = (5 - countdownSeconds) / 5;
                const offset = circumference - (progress * circumference);
                progressCircle.style.strokeDashoffset = offset;
                
                // ì¹´ìš´íŠ¸ë‹¤ìš´ ì™„ë£Œ ì‹œ
                if (countdownSeconds <= 0) {
                    clearInterval(countdownTimer);
                    showInputScene(); // ì…ë ¥ í™”ë©´ìœ¼ë¡œ ì „í™˜
                }
            }, 1000);
        }

        // ì…ë ¥ í™”ë©´ í‘œì‹œ í•¨ìˆ˜
        function showInputScene() {
            showScene('scene3');
            // ëª¨ë“  ì…ë ¥ì°½ ì´ˆê¸°í™”
            currentInputIndex = 0;
            for (let i = 1; i <= 4; i++) {
                const inputElement = document.getElementById('userInput' + i);
                inputElement.value = '';
                inputElement.classList.remove('active');
            }
            // ì²« ë²ˆì§¸ ì…ë ¥ì°½ í™œì„±í™”
            document.getElementById('userInput1').classList.add('active');
        }

        // ìˆ«ì ì…ë ¥ í•¨ìˆ˜ (í‚¤íŒ¨ë“œ í´ë¦­ ì‹œ)
        function inputNumber(num) {
            if (currentInputIndex >= 4) return; // ëª¨ë“  ì…ë ¥ì´ ì™„ë£Œëœ ê²½ìš° ë¬´ì‹œ
            
            const currentInput = document.getElementById('userInput' + (currentInputIndex + 1));
            
            if (currentInput.value.length < 2) {
                // í˜„ì¬ ì…ë ¥ì°½ì— ìˆ«ì ì¶”ê°€
                currentInput.value += num;
                
                // 2ìë¦¬ê°€ ì™„ì„±ë˜ë©´ ë‹¤ìŒ ì…ë ¥ì°½ìœ¼ë¡œ ì´ë™
                if (currentInput.value.length === 2) {
                    currentInput.classList.remove('active');
                    currentInputIndex++;
                    
                    if (currentInputIndex < 4) {
                        const nextInput = document.getElementById('userInput' + (currentInputIndex + 1));
                        nextInput.classList.add('active');
                    }
                }
            }
        }

        // ìˆ«ì ì‚­ì œ í•¨ìˆ˜ (ë°±ìŠ¤í˜ì´ìŠ¤)
        function deleteNumber() {
            // í˜„ì¬ í™œì„±í™”ëœ ì…ë ¥ì°½ ì°¾ê¸°
            let activeIndex = -1;
            for (let i = 0; i < 4; i++) {
                const input = document.getElementById('userInput' + (i + 1));
                if (input.value.length > 0 && input.value.length < 2) {
                    activeIndex = i;
                    break;
                }
            }
            
            // í™œì„±í™”ëœ ì…ë ¥ì°½ì´ ì—†ìœ¼ë©´ ë§ˆì§€ë§‰ ì™„ì„±ëœ ì…ë ¥ì°½ì„ í™œì„±í™”
            if (activeIndex === -1) {
                for (let i = 3; i >= 0; i--) {
                    const input = document.getElementById('userInput' + (i + 1));
                    if (input.value.length === 2) {
                        activeIndex = i;
                        currentInputIndex = i;
                        input.classList.add('active');
                        break;
                    }
                }
            }
            
            if (activeIndex >= 0) {
                const input = document.getElementById('userInput' + (activeIndex + 1));
                if (input.value.length > 0) {
                    input.value = input.value.slice(0, -1);
                    if (input.value.length === 0 && activeIndex > 0) {
                        // í˜„ì¬ ì…ë ¥ì°½ì´ ë¹„ì—ˆê³  ì²« ë²ˆì§¸ê°€ ì•„ë‹ˆë©´ ì´ì „ ì…ë ¥ì°½ìœ¼ë¡œ ì´ë™
                        input.classList.remove('active');
                        currentInputIndex = activeIndex - 1;
                        const prevInput = document.getElementById('userInput' + currentInputIndex);
                        prevInput.classList.add('active');
                    }
                }
            }
        }

        // ì „ì²´ ì‚­ì œ í•¨ìˆ˜
        function clearAll() {
            currentInputIndex = 0;
            for (let i = 1; i <= 4; i++) {
                const inputElement = document.getElementById('userInput' + i);
                inputElement.value = '';
                inputElement.classList.remove('active');
            }
            document.getElementById('userInput1').classList.add('active');
        }

        // ì •ë‹µ í™•ì¸ í•¨ìˆ˜
        function checkAnswer() {
            // ëª¨ë“  ì…ë ¥ì°½ì˜ ê°’ í™•ì¸
            const userInputs = [];
            let allComplete = true;
            
            for (let i = 1; i <= 4; i++) {
                const inputValue = document.getElementById('userInput' + i).value;
                if (inputValue.length !== 2) {
                    allComplete = false;
                    break;
                }
                userInputs.push(inputValue);
            }
            
            // ëª¨ë“  ì…ë ¥ì´ ì™„ë£Œë˜ì§€ ì•Šì€ ê²½ìš°
            if (!allComplete) {
                alert('ëª¨ë“  2ìë¦¬ ìˆ«ìë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                return;
            }
            
            // ì •ë‹µ ë¹„êµ
            let isCorrect = true;
            for (let i = 0; i < 4; i++) {
                if (userInputs[i] !== currentNumbers[i]) {
                    isCorrect = false;
                    break;
                }
            }
            
            if (isCorrect) {
                // ì„±ê³µ ì‹œ ì„±ê³µ í™”ë©´ í‘œì‹œ
                showScene('scene4-success');
                playSuccessEffects(); // ì„±ê³µ íš¨ê³¼ ì¬ìƒ
            } else {
                // ì‹¤íŒ¨ ì‹œ ì‹¤íŒ¨ í™”ë©´ í‘œì‹œ
                const correctAnswerText = currentNumbers.join(', ');
                document.getElementById('correctAnswer').textContent = correctAnswerText;
                showScene('scene4-fail');
                playFailEffects(); // ì‹¤íŒ¨ íš¨ê³¼ ì¬ìƒ
            }
        }

        // ì¿ í° ì €ì¥ í•¨ìˆ˜ (ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ)
        function saveCoupon() {
            // HTML5 Canvasë¥¼ ì‚¬ìš©í•´ì„œ ì¿ í° ì´ë¯¸ì§€ ìƒì„±
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            
            // ìº”ë²„ìŠ¤ í¬ê¸° ì„¤ì •
            canvas.width = 400;
            canvas.height = 240;
            
            // ë°°ê²½ ê·¸ë¼ë°ì´ì…˜ ìƒì„±
            const gradient = ctx.createLinearGradient(0, 0, 400, 240);
            gradient.addColorStop(0, '#f093fb');
            gradient.addColorStop(1, '#f5576c');
            
            // ë°°ê²½ ê·¸ë¦¬ê¸°
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, 400, 240);
            
            // í…ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ ì„¤ì •
            ctx.fillStyle = 'white';
            ctx.font = 'bold 28px Arial';
            ctx.textAlign = 'center';
            ctx.shadowColor = 'rgba(0,0,0,0.3)';
            ctx.shadowBlur = 4;
            ctx.shadowOffsetX = 2;
            ctx.shadowOffsetY = 2;
            
            // ì¿ í° í…ìŠ¤íŠ¸ ê·¸ë¦¬ê¸°
            ctx.fillText('ğŸ ì¶•í•˜ ì¿ í°', 200, 80);
            ctx.font = 'bold 48px Arial';
            ctx.fillText('1000ì› í• ì¸', 200, 140);
            ctx.font = 'bold 16px Arial';
            ctx.fillText('ê¸°ì–µë ¥ ì±Œë¦°ì§€ ì„±ê³µ ê¸°ë…', 200, 180);
            ctx.fillText(new Date().toLocaleDateString(), 200, 210);
            
            // ì´ë¯¸ì§€ë¡œ ë³€í™˜í•˜ì—¬ ë‹¤ìš´ë¡œë“œ
            canvas.toBlob(function(blob) {
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'ê¸°ì–µë ¥ì±Œë¦°ì§€_ì¿ í°_' + new Date().getTime() + '.png';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                // ì €ì¥ ì™„ë£Œ ì•Œë¦¼
                alert('ì¿ í°ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ‰');
            });
        }

        // í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸° í•¨ìˆ˜
        function goHome() {
            // ëª¨ë“  ë³€ìˆ˜ ì´ˆê¸°í™”
            currentNumbers = [];
            countdownSeconds = 5;
            currentInputIndex = 0;
            if (countdownTimer) {
                clearInterval(countdownTimer);
            }
            
            // ì²« ë²ˆì§¸ ì¥ë©´ìœ¼ë¡œ ëŒì•„ê°€ê¸°
            showScene('scene1');
        }

        // ì¥ë©´ ì „í™˜ í•¨ìˆ˜
        function showScene(sceneId) {
            // ëª¨ë“  ì¥ë©´ ìˆ¨ê¸°ê¸°
            const scenes = document.querySelectorAll('.scene');
            scenes.forEach(scene => {
                scene.classList.remove('active');
            });
            
            // ì§€ì •ëœ ì¥ë©´ë§Œ í‘œì‹œ
            document.getElementById(sceneId).classList.add('active');
        }

        // ì„±ê³µ ì‹œ ì¶•í¬ íš¨ê³¼ ë° ì‚¬ìš´ë“œ ì¬ìƒ
        function playSuccessEffects() {
            console.log('ì„±ê³µ íš¨ê³¼ ì‹œì‘!'); // ë””ë²„ê·¸ìš©
            
            // ì¶•í¬ ì‚¬ìš´ë“œ ì¬ìƒ
            const successSound = document.getElementById('successSound');
            successSound.currentTime = 0; // ì²˜ìŒë¶€í„° ì¬ìƒ
            successSound.volume = 1.0; // ë³¼ë¥¨ ìµœëŒ€
            
            // ì‚¬ìš´ë“œ ì¬ìƒ ì‹œë„
            const playPromise = successSound.play();
            if (playPromise !== undefined) {
                playPromise.then(() => {
                    console.log('ì¶•í¬ ì‚¬ìš´ë“œ ì¬ìƒ ì„±ê³µ!');
                }).catch(e => {
                    console.log('ì‚¬ìš´ë“œ ì¬ìƒ ì‹¤íŒ¨:', e);
                    // ì‚¬ìš´ë“œ ì¬ìƒ ì‹¤íŒ¨ ì‹œ ëŒ€ì²´ íš¨ê³¼ (ì§„ë™ ë“±)
                    if (navigator.vibrate) {
                        navigator.vibrate([200, 100, 200]);
                    }
                    // ì•Œë¦¼ìœ¼ë¡œ ì‚¬ìš´ë“œ ì¬ìƒ ì‹¤íŒ¨ ì•Œë ¤ì£¼ê¸°
                    console.log('ğŸ”Š ì‚¬ìš´ë“œê°€ ì°¨ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤. ë¸Œë¼ìš°ì € ì„¤ì •ì„ í™•ì¸í•´ì£¼ì„¸ìš”!');
                });
            }
            
            // ì¶•í¬ ì• ë‹ˆë©”ì´ì…˜ ìƒì„± (ì‚¬ìš´ë“œì™€ ë³„ê°œë¡œ ì‹¤í–‰)
            createConfetti();
            console.log('ì¶•í¬ ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘!'); // ë””ë²„ê·¸ìš©
        }

        // ì‹¤íŒ¨ ì‹œ ì›ƒìŒ ì‚¬ìš´ë“œ ë° ë‚ ì•„ê°€ëŠ” ì´ë¯¸ì§€ íš¨ê³¼
        function playFailEffects() {
            // ì›ƒìŒ ì‚¬ìš´ë“œ ì¬ìƒ
            const failSound = document.getElementById('failSound');
            failSound.currentTime = 0; // ì²˜ìŒë¶€í„° ì¬ìƒ
            failSound.play().catch(e => {
                console.log('ì‚¬ìš´ë“œ ì¬ìƒ ì‹¤íŒ¨:', e);
            });
            
            // ë‚ ì•„ê°€ëŠ” ì´ë¯¸ì§€ ìƒì„±
            createFlyingImage();
        }

        // ì¶•í¬ ìƒì„± í•¨ìˆ˜
        function createConfetti() {
            console.log('ì¶•í¬ ìƒì„± í•¨ìˆ˜ í˜¸ì¶œë¨'); // ë””ë²„ê·¸ìš©
            
            const confettiContainer = document.getElementById('confettiContainer');
            if (!confettiContainer) {
                console.log('ì¶•í¬ ì»¨í…Œì´ë„ˆë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!');
                return;
            }
            
            const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#f9ca24', '#f0932b', '#eb4d4b', '#6c5ce7'];
            
            // ê¸°ì¡´ ì¶•í¬ ì œê±°
            confettiContainer.innerHTML = '';
            
            // 50ê°œì˜ ì¶•í¬ ìƒì„±
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.animationDelay = Math.random() * 2 + 's';
                confetti.style.animationDuration = (Math.random() * 2 + 2) + 's';
                confettiContainer.appendChild(confetti);
            }
            
            console.log('50ê°œì˜ ì¶•í¬ê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!'); // ë””ë²„ê·¸ìš©
            
            // 5ì´ˆ í›„ ì¶•í¬ ì œê±°
            setTimeout(() => {
                confettiContainer.innerHTML = '';
                console.log('ì¶•í¬ê°€ ì •ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.');
            }, 5000);
        }

        // ë‚ ì•„ê°€ëŠ” ì´ë¯¸ì§€ ìƒì„± í•¨ìˆ˜
        function createFlyingImage() {
            const gameContainer = document.querySelector('.game-container');
            
            // ë‚ ì•„ê°€ëŠ” ì´ë¯¸ì§€ ìƒì„±
            const flyingImg = document.createElement('div');
            flyingImg.className = 'flying-image';
            
            // ggg.png ì´ë¯¸ì§€ê°€ ì—†ëŠ” ê²½ìš° ëŒ€ì²´ ì´ëª¨ì§€ ì‚¬ìš©
            flyingImg.innerHTML = 'ğŸ˜…'; // ì´ëª¨ì§€ë¡œ ëŒ€ì²´
            flyingImg.style.fontSize = '60px';
            flyingImg.style.display = 'flex';
            flyingImg.style.alignItems = 'center';
            flyingImg.style.justifyContent = 'center';
            
            // ì‹¤ì œ ì´ë¯¸ì§€ íŒŒì¼ì´ ìˆëŠ” ê²½ìš° ì‚¬ìš©
            /* 
            flyingImg.style.backgroundImage = 'url(ggg.png)';
            flyingImg.style.backgroundSize = 'cover';
            flyingImg.style.backgroundPosition = 'center';
            */
            
            gameContainer.appendChild(flyingImg);
            
            // 4ì´ˆ í›„ ì´ë¯¸ì§€ ì œê±°
            setTimeout(() => {
                if (flyingImg && flyingImg.parentNode) {
                    flyingImg.parentNode.removeChild(flyingImg);
                }
            }, 4000);
        }

        // í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ ì‹œ ì‹¤í–‰
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ê¸°ì–µë ¥ ì±Œë¦°ì§€ ê²Œì„ì´ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ®');
            
            // ì‚¬ìš´ë“œ íŒŒì¼ ì‚¬ì „ ë¡œë“œ
            const successSound = document.getElementById('successSound');
            const failSound = document.getElementById('failSound');
            
            // ì‚¬ìš´ë“œ ë¡œë“œ ì²´í¬
            successSound.addEventListener('canplaythrough', () => {
                console.log('ì„±ê³µ ì‚¬ìš´ë“œ ë¡œë“œ ì™„ë£Œ');
            });
            
            failSound.addEventListener('canplaythrough', () => {
                console.log('ì‹¤íŒ¨ ì‚¬ìš´ë“œ ë¡œë“œ ì™„ë£Œ');
            });
        });
    </script>
</body>
</html> 